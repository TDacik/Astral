# Workflow for running tests
#
# Author: Tomas Dacik (xdacik00@fit.vutbr.cz), 2022

name: tests

on: [push, pull_request]

jobs:

  build:
    runs-on: ubuntu-latest
    
    container: tdacik/astral:system-dependencies

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install dependencies
        run: opam install . --deps-only

      - name: Install Astral
        run: |
          dune build
          dune install

      - name: Run tests
        run: python3 scripts/run_tests.py
