# Workflow for running tests
#
# Author: Tomas Dacik (xdacik00@fit.vutbr.cz), 2022

name: tests

on: [push, pull_request]

jobs:

  build:
    runs-on: ubuntu-latest

    container:
      image: ocaml/opam:ubuntu-20.04-ocaml-4.12
      options: --user root

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Install python
        run: |
          apt update
          apt install -y python3.9

      - name: Install Astral
        run: opam install .

      - name: Run tests
        run: python3.9 scripts/run_tests.py
